<canvas>
<script>
height=200;
width=200;

r=5
b = [100,150];
ph = 10;
pw = 20;
p = [100-10,180];
ew = 20;
blocks = [
	[10,10],[30,10],[50,10],[70,10],[90,10],[110,10],[130,10],[150,10],[170,10],
	[10,20],[30,20],[50,20],[70,20],[90,20],[110,20],[130,20],[150,20],[170,20],
	[10,30],[30,30],[50,30],[70,30],[90,30],[110,30],[130,30],[150,30],[170,30],
	[10,40],[30,40],[50,40],[70,40],[90,40],[110,40],[130,40],[150,40],[170,40],
];

dX = 0;
dY = 5;

boxcircle = (x,y,w,h) => {
	//https://github.com/davidfig/intersects/blob/master/box-circle.js
	distX = Math.abs(b[0]-(x+w/4));
	distY = Math.abs(b[1]-(y+h/4));
	if(distX > w/2 + r || distY > h/2 + r) return false;
	if(distX <= w/2 || distY <=h/2) return true;
	xxx = distX - w/2;
	yyy = distY - h/2;
	return xxx*xxx+yyy*yyy <= r*r;

}


physics= () => {
	b[0]+=dX;
	b[1]+=dY;
	//bounds
	if(b[0]-r<=0||b[0]+r==width)dX*=-1;//left | right
	if(b[1]-r<=0||b[1]+r==height)dY*=-1;//top | bottom
	//player
	if(boxcircle(p[0],p[1],pw,ph)) {
		dX*-1;
		dY*-1;
	}
	
	//blocks

}

c = document.body.children[0];
c.height=height;
c.width=width;
ctx = c.getContext("2d");

draw = () => {
	//clear
	ctx.clearRect(0, 0, c.width, c.height);
	//player
	ctx.fillRect(p[0],p[1],pw,ph);
	//ball
	ctx.beginPath();
	ctx.arc(b[0],b[1],r,0,2*Math.PI);
	ctx.fill();
	//blocks
	blocks.forEach(e=>ctx.fillRect(e[0]+1,e[1]+1,ew-2,8));
}
setInterval(() => {physics()}, 100);
setInterval(() => {draw()}, 100);
</script>

